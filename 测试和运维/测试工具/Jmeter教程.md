#### JMeter

------

##### 压力测试

众多类型的软件测试中，压力测试正是以软件响应速度为测试目标，尤其是针对在较短时间内大量并发用户的访问时，软件的抗压能力。这次共同学习压力测试工具JMeter，简单介绍了如何使用它来完成常用的压力测试：Web 测试、数据库测试和 JMS 测试。

**常用测试**

一、**Web** **服务器**

  对于大多数的项目来说，并不会自行开发一个Web服务器，因此Web服务器压力测试的对象实际就是--发布到Web服务器中的软件。最简单的Web测试计划只需要三个 JMeter 的测试步骤。

Web测试步骤：

  一、在线程组中定义线程数、测试循环数。

  二、 在http请求中定义服务器、端口、协议和方 法、请求路径等。 

  三、表格监听器负责收集和显示结果。 



参数说明：

利用JMeter的工具配置50个线程，每个线程重复运行20次，访问平台首页。

参数说明：#Samples： 表示你这次测试中一共发出了多少个请求（样本数据），如果测试计划模拟 10 个用户，每个用户迭代 10 次，则样本数据为100

Average： 平均响应时间 —— 默认情况下是单个 Request 的平均响应时间，当使用了 Transaction Controller 时，也可以以 Transaction 为单位显示平均响应时间。

Median： 中位数，也就是 50 ％用户的响应时间

90% Line： 90 ％用户的响应时间

Min： 最小响应时间

Max： 最大响应时间

Error%： 本次测试中出现错误的请求的数量 / 请求的总数

Throughput： 吞吐量 —— 默认情况下表示每秒完成的请求数（ Request per Second ），当使用了 Transaction Controller 时，也可以表示类似 LoadRunner 的 Transaction per Second 数

KB/Sec： 每秒从服务器端接收到的数据量，相当于 LoadRunner 中的 Throughput/Sec



二、**数据库服务器**

  数据库对象是否可以有效地承受来自多个用户的访问。这些对象主要是：索引、触发器、存储过程和锁。通过对于SQL语句和存储过程的测试，JMeter 可以间接的反应数据库对象是否需要优化。



第一步

  JDBC连接配置，负责配置数据库连接相关的信息。如：数据库url、数据库驱动类名、用户名和密码等等。在这些配置中，“绑定到池的变量名”（Variable Name Bound to Pool）是一个非常重要的属性，这个属性会在JDBC请求中被引用。通过它。

  JDBC请求和JDBC连接配置建立关联。（测试前，请将所需要的数据库驱动放到JMeter的classpath中）。

第二步

  JDBC请求，负责发送请求进行测试。 

第三步

  图形结果，收集显示测试结果。





三、**JMS****服务器**

  JMS(Java Message Service，Java消息服务)是一组Java应用接口，它提供创建、发送、接收、读取消息的服务。JMS API定义了一组公共的应用程序接口和相应语法，使得Java应用能够和各种消息中间件进行通信，这些消息中间件包括IBM MQ-Series、Microsoft MSMQ及纯Java的SonicMQ。通过使用JMS API，开发人员无需掌握不同消息产品的使用方法，也可以使用统一的JMS API来操纵各种消息中间件。通过使用JMS，能够最大限度地提升消息应用的可移植性。 JMS既支持点对点的消息通信，也支持发布/订阅式的消息通信。**
**

JMeter 测试的重点应该是消息的产生者和消费者本身能力





消息组成

消息头（必须）：包含用于识别和为消息寻找路由的操作设置。 

一组消息属性（可选）：包含额外的属性，支持其他提供者和用户的兼容。可以创建定制的字段和过滤器（消息选择器）。

一个消息体（可选）：允许用户创建五种类型的消息（文本消息，映射消息，字节消息，流消息和对象消息）。

消息接口非常灵活，并提供了许多方式来定制消息的内容
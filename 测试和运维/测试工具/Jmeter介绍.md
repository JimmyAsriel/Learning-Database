#### Jmeter的测试功能框架和使用逻辑

------

JMeter可以完成常用的压力测试：Web 测试、数据库测试和 JMS 测试。其中Jmeter的一个测试计划是其测试的最大粒度，这意味着一个测试计划就可以编写多样的测试功能测试整个目标服务，例如数据库服务。

一个测试计划包含数个功能元件，如线程组（thread group）， 定时器（timer）， 和HTTP 取样 (sampler) 元件。 不同的功能元件配置形成了不同的测试计划。

其中，每个线程均独立运行测试计划。这意味着线程组是测试中的活动实体。

##### Jmeter的特性

- 完全的可移植性和100%纯Java。 完全Swing的轻量级组件支持（预编译的JAR使用 javax.swing.*）包。 
- 完全多线程框架允许通过多个线程并发取样和通过单独的线程组对不同的功能同时取样。 
- GUI设计允许快速操作和更精确的计时。 
- 缓存和离线分析/回放测试结果。 
- 具有提供动态输入到测试的功能（包括JavaScript）。 
- 支持脚本变成的取样器（在1.9.2及以上版本支持BeanShell）。 

#### 性能测试及其目的是什么？

------

性能测试是以软件响应速度为测试目标，在较短时间内大量并发用户的访问时，软件的抗压能力。此外，性能测试结果，包括确定下来的瓶颈， 都需要反馈给开发团队或者架构师进行优化设计。 

在这个过程中，并写测试脚本和回顾测试脚本是其中很重要的部分，要精心筹划和管理实施。凭借测试脚本指导和一个好的性能测试流程，将会有更多的机会来在较重负载下优化软件性能。性能测试包括并不仅限于以下内容： 

- 编写性能测试需求
- 选择测试情景 
- 准备测试环境
- 编写测试脚本 
- 执行测试
- 回顾测试脚本和测试结果 
- 指出性能瓶颈 
- 书写测试报告

#### **常用测试类型**

------

##### 一、Web服务器测试

Web测试意味着对HTTP和FTP服务器进行压力和负载能力测试，这体现在目标服务器对请求的承载能力。

对静态的和动态的资源（文件，Servlet，Perl脚本，Java对象，数据库和查询，FTP服务器或是其它资源）的性能进行测试。

Web测试步骤：

1. 在线程组中定义线程数、测试循环数。
   - 例如：50个线程，每个线程重复运行20次，访问平台首页
2. 在http请求中定义服务器、端口、协议和方 法、请求路径等。 
3. 表格监听器负责收集和显示结果。 

参数说明：

- Samples： 表示你这次测试中一共发出了多少个请求（样本数据），如果测试计划模拟 10 个用户，每个用户迭代 10 次，则样本数据为100
- Average： 平均响应时间，默认情况下是单个 Request 的平均响应时间，当使用了 Transaction Controller 时，也可以以 Transaction 为单位显示平均响应时间
- Median： 中位数，也就是 50 ％用户的响应时间
- 90% Line： 90 ％用户的响应时间
- Min： 最小响应时间
- Max： 最大响应时间
- Error： 本次测试中出现错误的请求的数量 / 请求的总数
- Throughput： 吞吐量 —— 默认情况下表示每秒完成的请求数（ Request per Second ），当使用了 Transaction Controller 时，也可以表示类似 LoadRunner 的 Transaction per Second 数
- KB/Sec： 每秒从服务器端接收到的数据量，相当于 LoadRunner 中的 Throughput/Sec

二、**数据库服务器**

数据库对象是否可以有效地承受来自多个用户的访问。这些对象主要是：*索引、触发器、存储过程和锁*。通过对于SQL语句和存储过程的测试，JMeter 可以间接的反应数据库对象是否需要优化。

数据库服务器测试步骤

1. JDBC连接配置，负责配置数据库连接相关的信息。
   - 如：数据库url、数据库驱动类名、用户名和密码等等。
   - 在这些配置中，“绑定到池的变量名”（Variable Name Bound to Pool）是一个非常重要的属性，这个属性会在JDBC请求中被引用。通过它JDBC请求和JDBC连接配置建立关联。（测试前，请将所需要的数据库驱动放到JMeter的classpath中）。
2. JDBC请求，负责发送请求进行测试。 
3. 图形结果，收集显示测试结果。

##### 三、JMS服务器

  JMS(Java Message Service，Java消息服务)是一组Java应用接口，它提供创建、发送、接收、读取消息的服务。JMS API定义了一组公共的应用程序接口和相应语法，使得Java应用能够和各种消息中间件进行通信，这些消息中间件包括IBM MQ-Series、Microsoft MSMQ及纯Java的SonicMQ。通过使用JMS API，开发人员无需掌握不同消息产品的使用方法，也可以使用统一的JMS API来操纵各种消息中间件。通过使用JMS，能够最大限度地提升消息应用的可移植性。 JMS既支持点对点的消息通信，也支持发布/订阅式的消息通信。JMeter 测试的重点应该是消息的产生者和消费者本身能力

消息组成

​	消息头（必须）：包含用于识别和为消息寻找路由的操作设置。 

​	一组消息属性（可选）：包含额外的属性，支持其他提供者和用户的兼容。可以创建定制的字段和过滤器（消息选择器）。

​	一个消息体（可选）：允许用户创建五种类型的消息（文本消息，映射消息，字节消息，流消息和对象消息）。

​	消息接口非常灵活，并提供了许多方式来定制消息的内容





 